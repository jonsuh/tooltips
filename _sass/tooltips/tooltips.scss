/*!
 * Tooltips
 * @description Pure CSS tooltips
 * @author Jonathan Suh @jonsuh
 * @site https://jonsuh.com/tooltips
 * @link https://github.com/jonsuh/tooltips
 */

// Settings
// ==================================================
$tooltips-color                  : white !default;
$tooltips-text-align             : left !default;
$tooltips-background-color       : black !default;
$tooltips-background-opacity     : 0.9 !default;

$tooltips-border-radius          : 3px !default;
$tooltips-padding-x              : 15px !default;
$tooltips-padding-y              : 10px !default;
$tooltips-spacing                : 0px !default;

$tooltips-transition-duration    : 0.15s !default;
$tooltips-transform-scale        : true !default;
$tooltips-transform-scale-from   : 0.7 !default;
$tooltips-translate-offset       : 5px !default;

$tooltips-tail                   : true !default;
$tooltips-tail-background-color  : $tooltips-background-color !default;
$tooltips-tail-background-opacity: $tooltips-background-opacity !default;
$tooltips-tail-width             : 16px !default;
$tooltips-tail-height            : 10px !default;

$tooltips-size-map: (
  default: 200px,
  small  : 100px,
  medium : 200px,
  large  : 400px,
) !default;

// Tooltip
// ==================================================
.tooltip,
[data-tooltip] {
  position: relative;

  &::before {
    color: $tooltips-color;
    text-align: $tooltips-text-align;
    padding: $tooltips-padding-y $tooltips-padding-x;
    border-radius: $tooltips-border-radius;
    background-color: $tooltips-background-color;
    @if $tooltips-background-opacity > 0 {
      background-color: rgba($tooltips-background-color, $tooltips-background-opacity);
    }
    content: attr(data-tooltip);
    width: 10000%;
    max-width: map-get($tooltips-size-map, default);
    @supports (width: 1vw) {
      width: 90vw;
    }
    left: 50%;
    bottom: 100%;
    transform-origin: bottom center;
  }

  &::after {
    @if $tooltips-tail == true {
      width: $tooltips-tail-width;
      height: 100%;
      border-left: $tooltips-tail-width / 2 solid transparent;
      border-right: $tooltips-tail-width / 2 solid transparent;
      border-top: $tooltips-tail-height solid $tooltips-tail-background-color;
      @if $tooltips-tail-background-opacity > 0 {
        border-top: $tooltips-tail-height solid rgba($tooltips-tail-background-color, $tooltips-tail-background-opacity);
      }
    }
    @else {
      width: 100%;
      height: 100%;
    }
    padding-bottom: $tooltips-spacing;
    content: "";
    top: 0;
    left: 50%;
    transform-origin: top center;
  }

  &::before,
  &::after {
    opacity: 0;
    z-index: -1;
    position: absolute;
    $transform: translateX(-50%) translateY($tooltips-translate-offset);
    @if $tooltips-transform-scale == true {
      $transform: $transform + scale($tooltips-transform-scale-from);
    }
    transform: $transform;
    transition: opacity $tooltips-transition-duration cubic-bezier(0.1, 1, 0.4, 1),
                transform $tooltips-transition-duration cubic-bezier(0.215, 0.61, 0.355, 1);
  }

  &:hover,
  &.is-on {
    &::before,
    &::after {
      $translateY: $tooltips-spacing;
      @if $tooltips-tail == true {
        $translateY: $translateY + $tooltips-tail-height;
      }

      opacity: 1;
      z-index: 1;
      transition: opacity $tooltips-transition-duration cubic-bezier(0.1, 1, 0.4, 1),
                  transform $tooltips-transition-duration cubic-bezier(0.215, 0.61, 0.355, 1);
      @if $tooltips-transform-scale == true {
        transform: translateX(-50%) translateY($translateY * -1) scale(1);
      }
      @else {
        transform: translateX(-50%) translateY($translateY * -1);
      }
    }
  }
}

@each $tooltip-size-name, $tooltip-size-value in $tooltips-size-map {
  .tooltip--#{$tooltip-size-name}::before {
    max-width: $tooltip-size-value;
  }
}

.tooltip--fit::before {
  width: 100%;
  max-width: inherit;
}
